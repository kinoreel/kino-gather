FROM python:3.6-slim
RUN apt-get update -y
RUN apt-get install -y gcc
ARG KAFKA_BROKER
ARG TABLE_NAME
ARG PG_SERVER
ARG PG_PORT
ARG PG_DB
ARG PG_USERNAME
ARG PG_PASSWORD
ENV KAFKA_BROKER $KAFKA_BROKER
ENV TABLE_NAME $TABLE_NAME
ENV PG_SERVER $PG_SERVER
ENV PG_PORT $PG_PORT
ENV PG_DB $PG_DB
ENV PG_USERNAME $PG_USERNAME
ENV PG_PASSWORD $PG_PASSWORD
COPY  . /code
WORKDIR /code
RUN pip3 install -r requirements.py
CMD ["python3", "kafka_kino_inserts.py"]